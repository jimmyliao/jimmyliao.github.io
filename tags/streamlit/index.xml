<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Streamlit on JimmyLiao Notes</title><link>https://jimmyliao.net/tags/streamlit/</link><description>Recent content in Streamlit on JimmyLiao Notes</description><generator>Hugo -- gohugo.io</generator><copyright>Copyright © 2008–2018, Steve Francia and the Hugo Authors; all rights reserved.</copyright><lastBuildDate>Wed, 01 Feb 2023 00:18:36 +0800</lastBuildDate><atom:link href="https://jimmyliao.net/tags/streamlit/index.xml" rel="self" type="application/rss+xml"/><item><title>Azure OpenAI Part 4: Azure OpenAI 服務申請</title><link>https://jimmyliao.net/post/2023-02-01-azure-openai-intro/</link><pubDate>Wed, 01 Feb 2023 00:18:36 +0800</pubDate><guid>https://jimmyliao.net/post/2023-02-01-azure-openai-intro/</guid><description>
&lt;p>隨著微軟官方新聞公告 &lt;a href="https://news.microsoft.com/zh-tw/azure-open-ai/">Azure OpenAI 正式推出 (general availability)&lt;/a>，越來越多人想知道如何申請 Azure OpenAI 服務。這篇分享一下我申請的心得。&lt;/p>
&lt;p>&lt;strong>快速通道在這 =&amp;gt;&lt;/strong>：&lt;a href="https://aka.ms/oai/access">Azure OpenAI 服務申請&lt;/a>&lt;/p>
&lt;p>(目前申請量很大，所以可能會有一段時間的等待時間，請耐心等待。)&lt;/p>
&lt;p>先從新聞公告看一下目前 Microsoft AI 上的關鍵進展&lt;/p>
&lt;!--![](/images/2023/2023-01/2023-01-13/2023-01-13-01.png)-->
&lt;p>&lt;img src="https://news.microsoft.com/wp-content/uploads/prod/sites/74/2023/01/0119-1.png" alt="">&lt;/p>
&lt;p>像是 GitHub Copilot、Azure OpenAI、Project Silica、Project Brainwave 等等，都是微軟在人工智慧領域的重要進展，也是微軟在 2022 年的 AI 重大發展。&lt;/p>
&lt;ul>
&lt;li>
&lt;h2 id="就開始點這個連結進入申請表單吧-httpsakamsoaiaccess">就開始點這個連結進入申請表單吧！ &lt;a href="https://aka.ms/oai/access">https://aka.ms/oai/access&lt;/a>&lt;/h2>
&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>
&lt;p>首先，從 instruction 這段，大意是根據 Microsoft Resposible AI 的&lt;a href="https://www.microsoft.com/en-us/ai/our-approach">承諾&lt;/a>，所以透過申請方式限制，只有在 Microsoft Azure 上的帳號才能申請 Azure OpenAI 服務。所以先決條件是... &lt;strong>要先有個 Azure 帳號 (記得準備好你的 subscription id)&lt;/strong>。還有請詳閱一下 &lt;a href="https://aka.ms/oai/terms">Azure OpenAI 服務條款&lt;/a> 跟 &lt;a href="https://www.microsoft.com/en-us/ai/our-approach">Responsible AI commitment&lt;/a>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>表單內容基本上注意一下紅字部分，填寫時不會有太多困難。此外要注意的是，&lt;strong>目前 DALL-E 的服務是邀請制，所以要分開申請&lt;/strong>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>申請如果通過，會收到一封確認信，裡面會有一個連結，點進去後，會看到這個畫面，這時候就代表申請成功了。
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/02.png" alt="">&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>(目前申請量很大，所以可能會有一段時間的等待時間，請耐心等待。)&lt;/p></description></item><item><title>Azure OpenAI Part 3: 當個 OpenAI 的詠唱者吧~</title><link>https://jimmyliao.net/post/2023-01-13-azure-openai-chat/</link><pubDate>Fri, 13 Jan 2023 02:18:36 +0800</pubDate><guid>https://jimmyliao.net/post/2023-01-13-azure-openai-chat/</guid><description>
&lt;p>&lt;a href="https://jimmyliao.net/post/2023-01-11-azure-openai/">第一篇&lt;/a> 介紹 Azure OpenAI Studio (&lt;a href="https://oai.azure.com/portal">https://oai.azure.com/portal&lt;/a>) 可以快速部署 OpenAI Model 以及驗證. &lt;a href="https://jimmyliao.net/post/2023-01-11-azure-openai-code/">第二篇&lt;/a> 介紹如何使用程式碼 (Python) 與 OpenAI Model 互動 . 此篇會利用 Streamlit 這可以快速將 Python 轉成 Web App, 並且用 &lt;code>streamlit_chat&lt;/code> 呈現為 Chatbot 互動. 教練, 我終於學會 MS SQL 了 (咦?)&lt;/p>
&lt;ol>
&lt;li>
&lt;p>在你的 python 環境或是 virtualenv 裡面裝上 &lt;code>streamlit&lt;/code> 以及 &lt;code>streamlit_chat&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">pip install streamlit streamlit_chat
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>廢話不多說, 直接看程式&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">requests&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">streamlit&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">st&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">openai&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">streamlit_chat&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">message&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl">&lt;span class="n">COMPLETIONS_MODEL&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;code-davinci-002&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">qa_openai&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">question_text&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl"> &lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">12&lt;/span>&lt;span class="cl"> &lt;span class="kn">import&lt;/span> &lt;span class="nn">openai&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">13&lt;/span>&lt;span class="cl"> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;azure&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">14&lt;/span>&lt;span class="cl"> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_base&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://&amp;lt;ENDPINT&amp;gt;.openai.azure.com/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">15&lt;/span>&lt;span class="cl"> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;2022-06-01-preview&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">16&lt;/span>&lt;span class="cl"> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;OPENAI_API_KEY&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">17&lt;/span>&lt;span class="cl"> &lt;span class="n">prompt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">question_text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">18&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">19&lt;/span>&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">question_text&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">20&lt;/span>&lt;span class="cl"> &lt;span class="n">respone_text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Completion&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">21&lt;/span>&lt;span class="cl"> &lt;span class="n">engine&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">COMPLETIONS_MODEL&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">22&lt;/span>&lt;span class="cl"> &lt;span class="n">prompt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">prompt&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">23&lt;/span>&lt;span class="cl"> &lt;span class="n">temperature&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">24&lt;/span>&lt;span class="cl"> &lt;span class="n">max_tokens&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">25&lt;/span>&lt;span class="cl"> &lt;span class="n">top_p&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">26&lt;/span>&lt;span class="cl"> &lt;span class="n">frequency_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">27&lt;/span>&lt;span class="cl"> &lt;span class="n">presence_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">28&lt;/span>&lt;span class="cl"> &lt;span class="p">)[&lt;/span>&lt;span class="s2">&amp;#34;choices&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">29&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">30&lt;/span>&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">respone_text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">31&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">32&lt;/span>&lt;span class="cl">&lt;span class="k">with&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">33&lt;/span>&lt;span class="cl"> &lt;span class="n">st&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;---&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">34&lt;/span>&lt;span class="cl"> &lt;span class="n">st&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">COMPLETIONS_MODEL&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> in Streamlit&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">35&lt;/span>&lt;span class="cl"> &lt;span class="n">st&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;##&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">36&lt;/span>&lt;span class="cl"> &lt;span class="n">chat_msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">text_input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Question:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;chat_msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">37&lt;/span>&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chat_msg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">is_user&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">38&lt;/span>&lt;span class="cl"> &lt;span class="n">chat_msg_res_confirm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;You asked me the following: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">chat_msg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">39&lt;/span>&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chat_msg_res_confirm&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">40&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">41&lt;/span>&lt;span class="cl"> &lt;span class="n">chat_msg_answer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">42&lt;/span>&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chat_msg&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">43&lt;/span>&lt;span class="cl"> &lt;span class="n">chat_msg_answer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">qa_openai&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chat_msg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">44&lt;/span>&lt;span class="cl"> &lt;span class="n">chat_msg_res_answer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Response: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">chat_msg_answer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">45&lt;/span>&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chat_msg_res_answer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>將 Streamlit 跑起來, 打開 Browser 試試吧!&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">streamlit run app.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>滿腔慾火學 SQL 啊!
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-13/2023-01-13-01.png" alt="">&lt;/p>
&lt;/li>
&lt;/ol></description></item></channel></rss>