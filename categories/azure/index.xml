<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Azure on JimmyLiao Notes</title><link>https://jimmyliao.net/categories/azure/</link><description>Recent content in Azure on JimmyLiao Notes</description><generator>Hugo -- gohugo.io</generator><copyright>Copyright © 2008–2018, Steve Francia and the Hugo Authors; all rights reserved.</copyright><lastBuildDate>Wed, 11 Jan 2023 00:18:36 +0800</lastBuildDate><atom:link href="https://jimmyliao.net/categories/azure/index.xml" rel="self" type="application/rss+xml"/><item><title>Azure OpenAI Part 1: 初探 OpenAI Studio</title><link>https://jimmyliao.net/post/2023-01-11-azure-openai/</link><pubDate>Wed, 11 Jan 2023 00:18:36 +0800</pubDate><guid>https://jimmyliao.net/post/2023-01-11-azure-openai/</guid><description>
&lt;p>最近 OpenAI 因為 ChatGPT 引起更多的關注, 加上今天這個新聞 &lt;a href="https://technews.tw/2023/01/10/chatgpt-openai-microsoft/">傳微軟計劃向 OpenAI 投資 100 億美元&lt;/a>, 還有一年多之前這篇: &lt;a href="https://www.ithome.com.tw/news/147645">微軟新推Azure OpenAI服務，企業使用GPT-3的門檻更低了！&lt;/a>. 覺得可以介紹如何在 Azure 上結合 OpenAI 服務到原有的企業使用情境. 這篇主要是先介紹 Azure 上針對 OpenAI 管理的工具 : Azure OpenAI Studio (&lt;a href="https://oai.azure.com/portal)">https://oai.azure.com/portal)&lt;/a>.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>首先, 先到 Azure Portal &amp;gt; Cognitive Services, 底下有個 Azure OpenAI.
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/01.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>因為還是 preview, 所以需要先申請 access, 基本上就是填線上表單. 通常 5-10 天 (但我好像隔天就收到了)
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/02.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>收到申請通過信之後, 回到 Portal 建立 OpenAI resource. 建立時注意一下 &lt;a href="https://azure.microsoft.com/en-us/pricing/details/cognitive-services/openai-service/">Pricing Page&lt;/a> (不過看了一下好像現在都一樣)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點 Explore 進入 OpenAI Studio 頁面 (&lt;a href="https://oai.azure.com/portal)">https://oai.azure.com/portal)&lt;/a>, 選 &lt;code>Go to playground&lt;/code>
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/03.png" alt="">&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/04.png" alt="">&lt;/p>
&lt;ol start="5">
&lt;li>
&lt;p>第一次進 Playground 還沒部署任何 OpenAI Model, 我們先到 Model Page 部署任一個來玩玩看吧!
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/05.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>回到 Playgound Page, 選取剛剛的 Deployment, 選取 Example
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/06.png" alt="">&lt;/p>
&lt;p>都英文沒感覺? 來試試中文&lt;/p>
&lt;/li>
&lt;li>
&lt;p>仔細看一下摘要, 好像還算符合內容大意?
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/07.png" alt="">&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>下一篇就來看一下如何用 Python 串接 Azure OpenAI 吧~&lt;/p></description></item><item><title>Azure 的五十個小劇場...之 Kusto Detective Agency 2022</title><link>https://jimmyliao.net/post/2022-12-23-kusto-detective-agency/</link><pubDate>Fri, 23 Dec 2022 00:10:36 +0800</pubDate><guid>https://jimmyliao.net/post/2022-12-23-kusto-detective-agency/</guid><description>
&lt;p>之前的案子接觸了 Azure Data Explorer 跟 SDK 開發，想說把之前理解的整理一下，發現這個有趣的 Challenge ，透過案例方式熟悉跟釐清基本的 KQL 觀念。
(先預告一下，接下來會講如何用 SDK 開發。)&lt;/p>
&lt;ol>
&lt;li>
&lt;p>先到 &lt;a href="https://detective.kusto.io/">https://detective.kusto.io/&lt;/a> ，點選 Inbox。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>依照指示建立 free cluster
&lt;a href="https://dataexplorer.azure.com/publicfreecluster">https://dataexplorer.azure.com/publicfreecluster&lt;/a>
&lt;img src="https://jimmyliao.net/images/2022/2022-12/2022-12-23/2022-12-23-01.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立好 free cluster 之後會自動帶到 ADX 畫面，記得將 Cluster URI 複製，待會會填入到 Challenge&lt;/p>
&lt;p>&lt;img src="https://jimmyliao.net/images/2022/2022-12/2022-12-23/2022-12-23-02.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>將前一個步驟的 Cluster URI 填入
&lt;img src="https://jimmyliao.net/images/2022/2022-12/2022-12-23/2022-12-23-03.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>接著依照指示打開 Query 工具，將底下 Onboarding 的 Database 建起來。
&lt;img src="https://jimmyliao.net/images/2022/2022-12/2022-12-23/2022-12-23-04.png" alt="">
&lt;img src="https://jimmyliao.net/images/2022/2022-12/2022-12-23/2022-12-23-05.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>先用個簡單的 KQL 找 Score 加總吧！
&lt;img src="https://jimmyliao.net/images/2022/2022-12/2022-12-23/2022-12-23-06.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>回到 Challenge 畫面填入答案跟你的 free cluster URL.
&lt;img src="https://jimmyliao.net/images/2022/2022-12/2022-12-23/2022-12-23-07.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>答案正確的話，會需要你的 Credly 資訊。
&lt;img src="https://jimmyliao.net/images/2022/2022-12/2022-12-23/2022-12-23-08.png" alt="">
&lt;img src="https://jimmyliao.net/images/2022/2022-12/2022-12-23/2022-12-23-09.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>恭喜！開始你的 Azure Data Explorer (Kusto) 挑戰吧～
&lt;img src="https://jimmyliao.net/images/2022/2022-12/2022-12-23/2022-12-23-10.png" alt="">&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Azure 的五十個小劇場...之 用 Colab 透過 Azure ML SDK (v1) submit job</title><link>https://jimmyliao.net/post/2022-11-29-aml-sdk-v1-job/</link><pubDate>Tue, 29 Nov 2022 00:10:36 +0800</pubDate><guid>https://jimmyliao.net/post/2022-11-29-aml-sdk-v1-job/</guid><description>
&lt;p>底下透過 SDK v1 的 ScriptRunConfig，來 Submit 一個 training job。另外也透過 Colab 的環境展示一下快速整合 AML SDK。&lt;/p>
&lt;p>準備動作：&lt;/p>
&lt;ul>
&lt;li>Azure Subscription ID&lt;/li>
&lt;li>AML Workspace name&lt;/li>
&lt;li>AML Resource group name&lt;/li>
&lt;/ul>
&lt;p>過程會需要透過 Azure Device login 取得 credential。&lt;/p>
&lt;p>Jupyter Notebook &lt;a href="https://github.com/jimmyliao/amlworkshop/blob/main/lab01/azureml-sdk-v2.ipynb">連結&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://colab.research.google.com/github/jimmyliao/amlworkshop/blob/main/lab01/azureml-sdk-v2.ipynb">&lt;img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab">&lt;/a>&lt;/p></description></item><item><title>Azure 的五十個小劇場...之 Azure ML SDK 版本檢查</title><link>https://jimmyliao.net/post/2022-11-25-aml-check-sdk-ver/</link><pubDate>Fri, 25 Nov 2022 08:10:36 +0800</pubDate><guid>https://jimmyliao.net/post/2022-11-25-aml-check-sdk-ver/</guid><description>
&lt;p>Azure ML SDK 兩個版本共存，就寫個檢查版號當作 Azure 學習筆記開頭吧。&lt;/p>
&lt;p>因為要 Demo Azure ML SDK 的環境有 &lt;a href="https://learn.microsoft.com/en-us/azure/machine-learning/v1/introduction">v1&lt;/a> and &lt;a href="https://learn.microsoft.com/en-us/python/api/overview/azure/ai-ml-readme?view=azure-python">v2&lt;/a>，為了快速檢查就先弄個 bash shell 。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">&lt;span class="c1"># Install Azure ML SDK v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl">&lt;span class="c1"># pip install -U azureml-core&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl">&lt;span class="c1"># Install Azure ML SDK v2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl">pip install -U azure-ai-ml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl">wget https://raw.githubusercontent.com/jimmyliao/amlworkshop/main/util/check_sdk.sh -O ./check_sdk.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl">chmod a+x ./check_sdk.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl">./check_sdk.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Jupyter Notebook &lt;a href="https://github.com/jimmyliao/amlworkshop/blob/main/lab_checkenv/aml_env_check.ipynb">連結&lt;/a>&lt;/p></description></item><item><title>Azure OpenAI Part 2: Show me the code!</title><link>https://jimmyliao.net/post/2023-01-11-azure-openai-code/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://jimmyliao.net/post/2023-01-11-azure-openai-code/</guid><description>
&lt;p>前一篇介紹申請以及使用 Azure OpenAI Studio (&lt;a href="https://oai.azure.com/portal">https://oai.azure.com/portal&lt;/a>) 快速部署 Model, 這篇介紹如何使用 code base 整合進原本的應用程式.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>在前一篇最後, 利用 Playground 測試 OpenAI 時, 不知道有沒有發現右上方有 &lt;code>Code View&lt;/code> 這個按鈕?&lt;br>
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/08.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>比對一下 Azure OpenAI 和 OpenAI 的範例.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Azure OpenAI 的範例&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">openai&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;azure&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_base&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://&amp;lt;YOUR-ENDPOINT-NAME&amp;gt;.openai.azure.com/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;OPENAI-API-VERSION&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;OPENAI_API_KEY&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl">&lt;span class="n">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Completion&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl"> &lt;span class="n">engine&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;MODEL-NAME&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl"> &lt;span class="n">prompt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl"> &lt;span class="n">temperature&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">12&lt;/span>&lt;span class="cl"> &lt;span class="n">max_tokens&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">13&lt;/span>&lt;span class="cl"> &lt;span class="n">top_p&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">14&lt;/span>&lt;span class="cl"> &lt;span class="n">frequency_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">15&lt;/span>&lt;span class="cl"> &lt;span class="n">presence_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">16&lt;/span>&lt;span class="cl"> &lt;span class="n">stop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>OpenAI 官方網站的範例&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">openai&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;OPENAI_API_KEY&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl">&lt;span class="n">start_sequence&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">A:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl">&lt;span class="n">restart_sequence&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n\n&lt;/span>&lt;span class="s2">Q: &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl">&lt;span class="n">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Completion&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;MODEL-NAME&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl"> &lt;span class="n">prompt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;...&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">12&lt;/span>&lt;span class="cl"> &lt;span class="n">temperature&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">13&lt;/span>&lt;span class="cl"> &lt;span class="n">max_tokens&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">14&lt;/span>&lt;span class="cl"> &lt;span class="n">top_p&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">15&lt;/span>&lt;span class="cl"> &lt;span class="n">frequency_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">16&lt;/span>&lt;span class="cl"> &lt;span class="n">presence_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">17&lt;/span>&lt;span class="cl"> &lt;span class="n">stop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">18&lt;/span>&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>看起來只需要 &lt;code>OPENAI_API_KEY&lt;/code> 就可以了.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>回到 Azure Cognitive service 畫面, 點選 OpenAI 設定主畫面左方的選單 &lt;code>Keys and Endpoint&lt;/code>. 將 Key1 的值複製作為 &lt;code>OPENAI_API_KEY&lt;/code>
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/09.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>這次來試試 &lt;code>code-davinci-002&lt;/code> 吧!&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">openai&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;azure&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_base&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://&amp;lt;ENDPOIND-NAME&amp;gt;.openai.azure.com/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;2022-06-01-preview&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;OPENAI_API_KEY&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl">&lt;span class="n">prompt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;Answer the question as truthfully as possible using the provided text, and if the answer is not contained within the text below, say &amp;#34;I don&amp;#39;t know&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl">&lt;span class="s2">Q: 幫我產生 ssh tunnel 的 bash script
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl">&lt;span class="s2">A:&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">12&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">13&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Completion&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">14&lt;/span>&lt;span class="cl"> &lt;span class="n">engine&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;code-davinci-002&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">15&lt;/span>&lt;span class="cl"> &lt;span class="n">prompt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">prompt&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">16&lt;/span>&lt;span class="cl"> &lt;span class="n">temperature&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">17&lt;/span>&lt;span class="cl"> &lt;span class="n">max_tokens&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">18&lt;/span>&lt;span class="cl"> &lt;span class="n">top_p&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">19&lt;/span>&lt;span class="cl"> &lt;span class="n">frequency_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">20&lt;/span>&lt;span class="cl"> &lt;span class="n">presence_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">21&lt;/span>&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">COMPLETIONS_MODEL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">22&lt;/span>&lt;span class="cl">&lt;span class="p">)[&lt;/span>&lt;span class="s2">&amp;#34;choices&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>某種程度也算對...
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/09.png" alt="">&lt;/p>
&lt;/li>
&lt;/ol></description></item></channel></rss>