<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>OpenAI on JimmyLiao Notes</title><link>https://jimmyliao.net/categories/openai/</link><description>Recent content in OpenAI on JimmyLiao Notes</description><generator>Hugo -- gohugo.io</generator><copyright>Copyright © 2008–2018, Steve Francia and the Hugo Authors; all rights reserved.</copyright><lastBuildDate>Sun, 12 Feb 2023 00:18:36 +0800</lastBuildDate><atom:link href="https://jimmyliao.net/categories/openai/index.xml" rel="self" type="application/rss+xml"/><item><title>Azure OpenAI Part 6: GPT-3 裡面的微調參數 - 溫度 (temperature)</title><link>https://jimmyliao.net/post/2023-02-12-openai-parameters/</link><pubDate>Sun, 12 Feb 2023 00:18:36 +0800</pubDate><guid>https://jimmyliao.net/post/2023-02-12-openai-parameters/</guid><description>
&lt;p>上週瞄到某個討論串的內容：(略 1000 字)...「溫度真的有用嗎？」，覺得這個問題不如直接動手實驗看看，順便把結果分享一下。&lt;/p>
&lt;p>你可以看到 GPT-3 的預設參數是：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl"> &lt;span class="nt">&amp;#34;engine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;davinci&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl"> &lt;span class="nt">&amp;#34;prompt&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;This is a test&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl"> &lt;span class="nt">&amp;#34;max_tokens&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl"> &lt;span class="nt">&amp;#34;temperature&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">0.9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl"> &lt;span class="nt">&amp;#34;top_p&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl"> &lt;span class="nt">&amp;#34;n&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl"> &lt;span class="nt">&amp;#34;stream&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl"> &lt;span class="nt">&amp;#34;logprobs&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl"> &lt;span class="nt">&amp;#34;stop&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>從 Azure OpenAI Studio Playground (或是 OpenAI Playgound 也可以) 看到關於 &lt;code>temperature&lt;/code> 的說明：
簡單來說，&lt;code>temperature&lt;/code> 越高，模型輸出的結果就會越隨機，越低就會越有規律。&lt;/p>
&lt;p>&lt;img src="https://jimmyliao.net/images/2023/2023-02/2023-02-12/02.png" alt="">&lt;/p>
&lt;p>原來這就是虎爛程度產生器的原理嘛(誤)。&lt;/p>
&lt;p>我們可以把 &lt;code>temperature&lt;/code> 調到 1，看看結果：
&lt;img src="https://jimmyliao.net/images/2023/2023-02/2023-02-12/01.png" alt="">&lt;/p>
&lt;p>先不論加菲貓是不是屬於貓的品種，這回答重複的答案還有夠多。&lt;/p>
&lt;p>再把 &lt;code>temperature&lt;/code> 調到 0，看看結果：
&lt;img src="https://jimmyliao.net/images/2023/2023-02/2023-02-12/03.png" alt="">&lt;/p>
&lt;p>雖然沒有回答到所有答案，但是看起來至少合理而且不重複。&lt;/p>
&lt;p>另外根據文件， &lt;code>temperature&lt;/code> 跟 &lt;code>top_p&lt;/code> 通常是不建議一起使用的，因為 &lt;code>top_p&lt;/code> 本身就是一種概率分佈，所以 &lt;code>temperature&lt;/code> 會讓分佈更加隨機。&lt;/p>
&lt;p>總之，利用 OpenAI 的 API 開發時，記得根據你的使用情境，調整 &lt;code>temperature&lt;/code> 的值。&lt;/p>
&lt;p>附上 ChatGPT 的回答，看起來至少比 GPT-3 原生的模型好一點點，有調整過有差！
&lt;img src="https://jimmyliao.net/images/2023/2023-02/2023-02-12/00.png" alt="">&lt;/p></description></item><item><title>Azure OpenAI Part 5: 從 OpenAI 收費與 Token 計算方式，看看 ChatGPT Plus 的收費合理嗎？</title><link>https://jimmyliao.net/post/2023-02-11-openai-pricing/</link><pubDate>Sat, 11 Feb 2023 00:18:36 +0800</pubDate><guid>https://jimmyliao.net/post/2023-02-11-openai-pricing/</guid><description>
&lt;p>今年 (2023) 二月一日時，OpenAI 推出 &lt;a href="https://openai.com/blog/chatgpt-plus/">ChatGPT Plus&lt;/a>，一個月 $20 USD。更在二月十日時推出台灣也可以加入 ChatGPT Plus(有誠意!)，到底這個價格是不是合理？這一篇就從 OpenAI 收費與 Token 計算方式，看看 ChatGPT Plus 的收費到底合不合理。&lt;/p>
&lt;p>首先先設定一下背景知識：ChatGPT 跟 GPT-3 的差異。&lt;/p>
&lt;ul>
&lt;li>GPT-3 則是一個通用的語言模型，可以用來做各種任務，例如：翻譯、搜尋、產生文章、產生程式碼等等，而 ChatGPT 是基於 GPT-3 模型建立的一個專門應用，目的是用聊天機器人的方式展示 GPT-3 的能力。&lt;/li>
&lt;/ul>
&lt;p>(問一下 ChatGPT 好了 XD)
&lt;img src="https://jimmyliao.net/images/2023/2023-02/2023-02-11/02.png" alt="">&lt;/p>
&lt;p>第二個題目就是，原本如果你是直接使用 OpenAI 的 Playground，或是 API 方式串接 GPT-3 模型，你會發現免費額度只有前 100K tokens。之後就是照 &lt;a href="https://openai.com/api/pricing">pricing plan&lt;/a> 以 tokens 單位開始計算。啥？什麼是 tokens？tokens 是 OpenAI 計算 GPT-3 模型使用量的單位，而每個 token 的&lt;a href="https://openai.com/api/pricing/#faq-token">計算方式&lt;/a>是：&lt;/p>
&lt;ul>
&lt;li>以英文字來說，每一個 token 約為 4 個字元或 0.75 個單字。&lt;/li>
&lt;li>以中文字 (DBCS) 來說，每一個 token 約為 2 個字元或 0.5 個單字。&lt;/li>
&lt;/ul>
&lt;p>那如果純粹以 ChatGPT Plus: USD $20 反推使用 Inference capacity 最好的 Davinci 模型來看：
USD $20 = 1000,000 token&lt;/p>
&lt;ul>
&lt;li>英文 約有 750,000 英文字&lt;/li>
&lt;li>中文 (DBCS) 約有 37,500 個單字&lt;/li>
&lt;/ul>
&lt;p>另外根據&lt;a href="https://www.linkedin.com/business/learning/blog/career-success-tips/you-speak-at-least-7-000-words-a-day-here-s-how-to-make-them">統計&lt;/a>，一個人一天大約會說 7,000 個單字，也就是說，一個月的單字數應該是 21,000 個單字。由於 Token 計算是提問與回答，所以我們將數量乘以 2，也就是說，約需產生 42,000 個單字，如果中文使用是再 Double 計算 token 用量。單純將 ChatGPT 當作 GPT-3 的 Text-davinci 模型來使用，應該是用不完，而且加上宣稱的尖峰時刻快樂使用、優先使用新功能，還有更快的回應時間，這個價格其實蠻划算的。&lt;/p>
&lt;p>另外再附上 OpenAI 的 token 計算機，可以讓你自行估算。只需要貼上你的問題與回答，就可以看到字元數，與實際 token 數。
&lt;a href="https://platform.openai.com/tokenizer">tokenizer&lt;/a>
&lt;img src="https://jimmyliao.net/images/2023/2023-02/2023-02-11/03.png" alt="">&lt;/p>
&lt;p>那回頭來看看，以開發者的角度來看，如果你是要使用 GPT-3 來做產品，那你應該會考慮使用 &lt;a href="https://openai.com/blog/openai-api/">OpenAI API&lt;/a>，而不是使用 ChatGPT。因為 OpenAI API 可以讓你根據需求，自行設定模型與參數，而且 Pay-as-you-go 的計價方式，可以讓你更精準的控管成本。&lt;/p>
&lt;p>而且如果以企業級的角度，如何評估 OpenAI 是否與企業原有的服務整合，必須考慮到 compliance、地域性、安全性等等，那你應該會選擇使用 &lt;a href="https://azure.microsoft.com/zh-tw/services/openai/">Azure OpenAI&lt;/a>，這樣你就可以在 Azure 上使用 OpenAI API，並且可以享有 Azure 整合方便。其他關於企業如何評估如何整合雲端服務，請參考 Azure 雲端採用架構 &lt;a href="https://docs.microsoft.com/zh-tw/azure/cloud-adoption-framework/">Cloud Adoption Framework&lt;/a>。&lt;/p></description></item><item><title>Azure OpenAI Part 4: Azure OpenAI 服務申請</title><link>https://jimmyliao.net/post/2023-02-01-azure-openai-intro/</link><pubDate>Wed, 01 Feb 2023 00:18:36 +0800</pubDate><guid>https://jimmyliao.net/post/2023-02-01-azure-openai-intro/</guid><description>
&lt;p>隨著微軟官方新聞公告 &lt;a href="https://news.microsoft.com/zh-tw/azure-open-ai/">Azure OpenAI 正式推出 (general availability)&lt;/a>，越來越多人想知道如何申請 Azure OpenAI 服務。這篇分享一下我申請的心得。&lt;/p>
&lt;p>&lt;strong>快速通道在這 =&amp;gt;&lt;/strong>：&lt;a href="https://aka.ms/oai/access">Azure OpenAI 服務申請&lt;/a>&lt;/p>
&lt;p>(目前申請量很大，所以可能會有一段時間的等待時間，請耐心等待。)&lt;/p>
&lt;p>先從新聞公告看一下目前 Microsoft AI 上的關鍵進展&lt;/p>
&lt;!--![](/images/2023/2023-01/2023-01-13/2023-01-13-01.png)-->
&lt;p>&lt;img src="https://news.microsoft.com/wp-content/uploads/prod/sites/74/2023/01/0119-1.png" alt="">&lt;/p>
&lt;p>像是 GitHub Copilot、Azure OpenAI、Project Silica、Project Brainwave 等等，都是微軟在人工智慧領域的重要進展，也是微軟在 2022 年的 AI 重大發展。&lt;/p>
&lt;ul>
&lt;li>
&lt;h2 id="就開始點這個連結進入申請表單吧-httpsakamsoaiaccess">就開始點這個連結進入申請表單吧！ &lt;a href="https://aka.ms/oai/access">https://aka.ms/oai/access&lt;/a>&lt;/h2>
&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>
&lt;p>首先，從 instruction 這段，大意是根據 Microsoft Resposible AI 的&lt;a href="https://www.microsoft.com/en-us/ai/our-approach">承諾&lt;/a>，所以透過申請方式限制，只有在 Microsoft Azure 上的帳號才能申請 Azure OpenAI 服務。所以先決條件是... &lt;strong>要先有個 Azure 帳號 (記得準備好你的 subscription id)&lt;/strong>。還有請詳閱一下 &lt;a href="https://aka.ms/oai/terms">Azure OpenAI 服務條款&lt;/a> 跟 &lt;a href="https://www.microsoft.com/en-us/ai/our-approach">Responsible AI commitment&lt;/a>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>表單內容基本上注意一下紅字部分，填寫時不會有太多困難。此外要注意的是，&lt;strong>目前 DALL-E 的服務是邀請制，所以要分開申請&lt;/strong>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>申請如果通過，會收到一封確認信，裡面會有一個連結，點進去後，會看到這個畫面，這時候就代表申請成功了。
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/02.png" alt="">&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>(目前申請量很大，所以可能會有一段時間的等待時間，請耐心等待。)&lt;/p></description></item><item><title>Azure OpenAI Part 3: 當個 OpenAI 的詠唱者吧~</title><link>https://jimmyliao.net/post/2023-01-13-azure-openai-chat/</link><pubDate>Fri, 13 Jan 2023 02:18:36 +0800</pubDate><guid>https://jimmyliao.net/post/2023-01-13-azure-openai-chat/</guid><description>
&lt;p>&lt;a href="https://jimmyliao.net/post/2023-01-11-azure-openai/">第一篇&lt;/a> 介紹 Azure OpenAI Studio (&lt;a href="https://oai.azure.com/portal">https://oai.azure.com/portal&lt;/a>) 可以快速部署 OpenAI Model 以及驗證. &lt;a href="https://jimmyliao.net/post/2023-01-11-azure-openai-code/">第二篇&lt;/a> 介紹如何使用程式碼 (Python) 與 OpenAI Model 互動 . 此篇會利用 Streamlit 這可以快速將 Python 轉成 Web App, 並且用 &lt;code>streamlit_chat&lt;/code> 呈現為 Chatbot 互動. 教練, 我終於學會 MS SQL 了 (咦?)&lt;/p>
&lt;ol>
&lt;li>
&lt;p>在你的 python 環境或是 virtualenv 裡面裝上 &lt;code>streamlit&lt;/code> 以及 &lt;code>streamlit_chat&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">pip install streamlit streamlit_chat
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>廢話不多說, 直接看程式&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">requests&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">streamlit&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">st&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">openai&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">streamlit_chat&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">message&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl">&lt;span class="n">COMPLETIONS_MODEL&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;code-davinci-002&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">qa_openai&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">question_text&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl"> &lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">12&lt;/span>&lt;span class="cl"> &lt;span class="kn">import&lt;/span> &lt;span class="nn">openai&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">13&lt;/span>&lt;span class="cl"> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;azure&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">14&lt;/span>&lt;span class="cl"> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_base&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://&amp;lt;ENDPINT&amp;gt;.openai.azure.com/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">15&lt;/span>&lt;span class="cl"> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;2022-06-01-preview&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">16&lt;/span>&lt;span class="cl"> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;OPENAI_API_KEY&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">17&lt;/span>&lt;span class="cl"> &lt;span class="n">prompt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">question_text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">18&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">19&lt;/span>&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">question_text&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">20&lt;/span>&lt;span class="cl"> &lt;span class="n">respone_text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Completion&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">21&lt;/span>&lt;span class="cl"> &lt;span class="n">engine&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">COMPLETIONS_MODEL&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">22&lt;/span>&lt;span class="cl"> &lt;span class="n">prompt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">prompt&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">23&lt;/span>&lt;span class="cl"> &lt;span class="n">temperature&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">24&lt;/span>&lt;span class="cl"> &lt;span class="n">max_tokens&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">25&lt;/span>&lt;span class="cl"> &lt;span class="n">top_p&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">26&lt;/span>&lt;span class="cl"> &lt;span class="n">frequency_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">27&lt;/span>&lt;span class="cl"> &lt;span class="n">presence_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">28&lt;/span>&lt;span class="cl"> &lt;span class="p">)[&lt;/span>&lt;span class="s2">&amp;#34;choices&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">29&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">30&lt;/span>&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">respone_text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">31&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">32&lt;/span>&lt;span class="cl">&lt;span class="k">with&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">33&lt;/span>&lt;span class="cl"> &lt;span class="n">st&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;---&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">34&lt;/span>&lt;span class="cl"> &lt;span class="n">st&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">COMPLETIONS_MODEL&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> in Streamlit&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">35&lt;/span>&lt;span class="cl"> &lt;span class="n">st&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;##&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">36&lt;/span>&lt;span class="cl"> &lt;span class="n">chat_msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">text_input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Question:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;chat_msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">37&lt;/span>&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chat_msg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">is_user&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">38&lt;/span>&lt;span class="cl"> &lt;span class="n">chat_msg_res_confirm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;You asked me the following: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">chat_msg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">39&lt;/span>&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chat_msg_res_confirm&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">40&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">41&lt;/span>&lt;span class="cl"> &lt;span class="n">chat_msg_answer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">42&lt;/span>&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chat_msg&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">43&lt;/span>&lt;span class="cl"> &lt;span class="n">chat_msg_answer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">qa_openai&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chat_msg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">44&lt;/span>&lt;span class="cl"> &lt;span class="n">chat_msg_res_answer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Response: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">chat_msg_answer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">45&lt;/span>&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chat_msg_res_answer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>將 Streamlit 跑起來, 打開 Browser 試試吧!&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">streamlit run app.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>滿腔慾火學 SQL 啊!
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-13/2023-01-13-01.png" alt="">&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Azure OpenAI Part 2: Show me the code!</title><link>https://jimmyliao.net/post/2023-01-11-azure-openai-code/</link><pubDate>Wed, 11 Jan 2023 02:18:36 +0800</pubDate><guid>https://jimmyliao.net/post/2023-01-11-azure-openai-code/</guid><description>
&lt;p>&lt;a href="https://jimmyliao.net/post/2023-01-11-azure-openai/">前一篇&lt;/a> 介紹了申請以及使用 Azure OpenAI Studio (&lt;a href="https://oai.azure.com/portal">https://oai.azure.com/portal&lt;/a>) 快速部署 Model 以及驗證. 這篇介紹如何使用 Python Code 整合進原本的應用程式.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>在前一篇最後, 利用 Playground 測試 OpenAI 時, 不知道有沒有發現右上方有 &lt;code>Code View&lt;/code> 這個按鈕?&lt;br>
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/08.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>比對一下 Azure OpenAI 和 OpenAI 的範例.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Azure OpenAI 的範例&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">openai&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;azure&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_base&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://&amp;lt;YOUR-ENDPOINT-NAME&amp;gt;.openai.azure.com/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;OPENAI-API-VERSION&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;OPENAI_API_KEY&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl">&lt;span class="n">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Completion&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl"> &lt;span class="n">engine&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;MODEL-NAME&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl"> &lt;span class="n">prompt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl"> &lt;span class="n">temperature&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">12&lt;/span>&lt;span class="cl"> &lt;span class="n">max_tokens&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">13&lt;/span>&lt;span class="cl"> &lt;span class="n">top_p&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">14&lt;/span>&lt;span class="cl"> &lt;span class="n">frequency_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">15&lt;/span>&lt;span class="cl"> &lt;span class="n">presence_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">16&lt;/span>&lt;span class="cl"> &lt;span class="n">stop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>OpenAI 官方網站的範例&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">openai&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;OPENAI_API_KEY&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl">&lt;span class="n">start_sequence&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">A:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl">&lt;span class="n">restart_sequence&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n\n&lt;/span>&lt;span class="s2">Q: &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl">&lt;span class="n">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Completion&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;MODEL-NAME&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl"> &lt;span class="n">prompt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;...&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">12&lt;/span>&lt;span class="cl"> &lt;span class="n">temperature&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">13&lt;/span>&lt;span class="cl"> &lt;span class="n">max_tokens&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">14&lt;/span>&lt;span class="cl"> &lt;span class="n">top_p&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">15&lt;/span>&lt;span class="cl"> &lt;span class="n">frequency_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">16&lt;/span>&lt;span class="cl"> &lt;span class="n">presence_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">17&lt;/span>&lt;span class="cl"> &lt;span class="n">stop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">18&lt;/span>&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>看起來只需要 &lt;code>OPENAI_API_KEY&lt;/code> 就可以了.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>回到 Azure Cognitive service 畫面, 點選 OpenAI 設定主畫面左方的選單 &lt;code>Keys and Endpoint&lt;/code>. 將 Key1 的值複製作為 &lt;code>OPENAI_API_KEY&lt;/code>
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/09.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>這次來試試 &lt;code>code-davinci-002&lt;/code> 吧!&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">openai&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;azure&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_base&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://&amp;lt;ENDPOIND-NAME&amp;gt;.openai.azure.com/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;2022-06-01-preview&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;OPENAI_API_KEY&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl">&lt;span class="n">prompt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;Answer the question as truthfully as possible using the provided text, and if the answer is not contained within the text below, say &amp;#34;I don&amp;#39;t know&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl">&lt;span class="s2">Q: 幫我產生 ssh tunnel 的 bash script
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl">&lt;span class="s2">A:&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">12&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">13&lt;/span>&lt;span class="cl">&lt;span class="n">openai&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Completion&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">14&lt;/span>&lt;span class="cl"> &lt;span class="n">engine&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;code-davinci-002&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">15&lt;/span>&lt;span class="cl"> &lt;span class="n">prompt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">prompt&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">16&lt;/span>&lt;span class="cl"> &lt;span class="n">temperature&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">17&lt;/span>&lt;span class="cl"> &lt;span class="n">max_tokens&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">18&lt;/span>&lt;span class="cl"> &lt;span class="n">top_p&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">19&lt;/span>&lt;span class="cl"> &lt;span class="n">frequency_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">20&lt;/span>&lt;span class="cl"> &lt;span class="n">presence_penalty&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">21&lt;/span>&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">COMPLETIONS_MODEL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">22&lt;/span>&lt;span class="cl">&lt;span class="p">)[&lt;/span>&lt;span class="s2">&amp;#34;choices&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>某種程度也算對...
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/10.png" alt="">&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Azure OpenAI Part 1: 初探 OpenAI Studio</title><link>https://jimmyliao.net/post/2023-01-11-azure-openai/</link><pubDate>Wed, 11 Jan 2023 00:18:36 +0800</pubDate><guid>https://jimmyliao.net/post/2023-01-11-azure-openai/</guid><description>
&lt;p>最近 OpenAI 因為 ChatGPT 引起更多的關注, 加上今天這個新聞 &lt;a href="https://technews.tw/2023/01/10/chatgpt-openai-microsoft/">傳微軟計劃向 OpenAI 投資 100 億美元&lt;/a>, 還有一年多之前這篇: &lt;a href="https://www.ithome.com.tw/news/147645">微軟新推Azure OpenAI服務，企業使用GPT-3的門檻更低了！&lt;/a>. 覺得可以介紹如何在 Azure 上結合 OpenAI 服務到原有的企業使用情境. 這篇主要是先介紹 Azure 上針對 OpenAI 管理的工具 : Azure OpenAI Studio (&lt;a href="https://oai.azure.com/portal)">https://oai.azure.com/portal)&lt;/a>.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>首先, 先到 Azure Portal &amp;gt; Cognitive Services, 底下有個 Azure OpenAI.
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/01.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>因為還是 preview, 所以需要先申請 access, 基本上就是填線上表單. 通常 5-10 天 (但我好像隔天就收到了)
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/02.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>收到申請通過信之後, 回到 Portal 建立 OpenAI resource. 建立時注意一下 &lt;a href="https://azure.microsoft.com/en-us/pricing/details/cognitive-services/openai-service/">Pricing Page&lt;/a> (不過看了一下好像現在都一樣)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點 Explore 進入 OpenAI Studio 頁面 (&lt;a href="https://oai.azure.com/portal)">https://oai.azure.com/portal)&lt;/a>, 選 &lt;code>Go to playground&lt;/code>
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/03.png" alt="">&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/04.png" alt="">&lt;/p>
&lt;ol start="5">
&lt;li>
&lt;p>第一次進 Playground 還沒部署任何 OpenAI Model, 我們先到 Model Page 部署任一個來玩玩看吧!
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/05.png" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>回到 Playgound Page, 選取剛剛的 Deployment, 選取 Example
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/06.png" alt="">&lt;/p>
&lt;p>都英文沒感覺? 來試試中文&lt;/p>
&lt;/li>
&lt;li>
&lt;p>仔細看一下摘要, 好像還算符合內容大意?
&lt;img src="https://jimmyliao.net/images/2023/2023-01/2023-01-11/07.png" alt="">&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>下一篇就來看一下如何用 Python 串接 Azure OpenAI 吧~&lt;/p></description></item></channel></rss>